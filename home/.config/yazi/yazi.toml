# https://yazi-rs.github.io/docs/configuration/yazi
# https://github.com/sxyazi/yazi/blob/shipped/yazi-config/preset/yazi-default.toml

[mgr]
ratio = [1, 2, 3]
sort_by = "natural"

[preview]
cache_dir = "~/.cache/yazi/"
image_filter = "nearest"
image_quality = 50

[opener]
image = [{ run = 'nsxiv_rifle.sh "$@"', desc = "nsxiv", orphan = true }]
video = [
  { run = 'mpv "$@"', desc = "mpv", orphan = true },
  { run = 'mpv --loop-file "$@"', desc = "mpv (loop)", orphan = true },
]
pdf = [{ run = 'zathura "$@"', desc = "zathura", orphan = true }]
office = [{ run = 'libreoffice "$@"', desc = "libreoffice", orphan = true }]
extract = [{ run = 'ya pub extract --list "$@"', desc = "extract" }]
html = [{ run = '${BROWSER:-firefox} "$@"', desc = "$BROWSER", orphan = true }]
text = [{ run = '${EDITOR:-vi} "$@"', desc = "$EDITOR", block = true }]

[open]
rules = [
  { mime = "image/*", use = [
    "image",
  ] },
  { mime = "{audio,video}/*", use = [
    "video",
  ] },
  { mime = "application/pdf", use = [
    "pdf",
  ] },
  { mime = "application/{oasis.opendocument,openxmlformats-officedocument}.*", use = [
    "office",
  ] },
  { mime = "application/{zip,rar,7z*,tar,gzip,xz}", use = [
    "extract",
  ] },
  { mime = "text/html", use = [
    "text",
    "html",
  ] },
  { mime = "{text/*,inode/empty,application/json,application/javascript}", use = [
    "text",
  ] },
]

[plugin]
prepend_fetchers = [
  { id = "mime", url = "*.{mp3,mp4,png,jpg,jpeg,webp,part*}", run = "mime-ext", prio = "high" },
  { id = "simple-tag", url = "*", run = "simple-tag" },
  { id = "simple-tag", url = "*/", run = "simple-tag" },
]
